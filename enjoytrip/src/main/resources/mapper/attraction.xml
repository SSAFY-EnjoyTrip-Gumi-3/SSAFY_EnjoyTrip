<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssafy.trip.model.dao.AttractionDao">

	<resultMap type="Attraction" id="attractionMap">
	<id column="attraction_no" property="attractionNo"/>
	<result column="content_id" property="contentId"/>
	<result column="title" property="title"/>
	<result column="content_type_id" property="contentTypeId"/>
	<result column="area_code" property="areaCode"/>
	<result column="si_gun_gu_code" property="siGunGuCode"/>
	<result column="image1" property="image1"/>
	<result column="image2" property="image2"/>
	<result column="map_level" property="mapLevel"/>
	<result column="latitude" property="latitude"/>
	<result column="longitude" property="longitude"/>
	<result column="tel" property="tel"/>
	<result column="addr1" property="addr1"/>
	<result column="addr2" property="addr2"/>
	<result column="homepage" property="homepage"/>
	<result column="overview" property="overview"/>
	</resultMap>
	
	<insert id="insertAttraction" useGeneratedKeys="true">
		INSERT INTO attractions (attraction_no, content_id, content_type_id, area_code, si_gun_gu_code, title, image1, image2, map_level, latitude, longitude, tel, addr1, addr2, homepage, overview)
		VALUES (#{attractionNo}, #{contentId}, #{contentTypeId}, #{areaCode}, #{siGunGuCode}, #{title}, #{image1}, #{image2}, #{mapLevel}, #{latitude}, #{longitude}, #{tel}, #{addr1}, #{addr2}, #{homepage}, #{overview});
	</insert>
	
	<select id="getAttractionByArea" resultMap="attractionMap">
		select attraction_no, content_id, content_type_id, area_code, si_gun_gu_code, title, image1, image2, map_level, latitude, longitude, tel, addr1, addr2, homepage, overview
		from attractions
		where si_gun_gu_code=#{siGunGuCode}
		and area_code=#{areaCode}
		order by RAND()
	</select>
	
	<select id="getAttractionByContentType" resultMap="attractionMap">
		select * from attractions
		where content_type_id=#{contentTypeId}
	</select>
	
	<select id="getAttractionByNo" resultMap="attractionMap">
		select * from attractions
		where attraction_no=#{attractionNo}
	</select>
	
	<select id="getAttractionByAreaAndContentType" resultMap="attractionMap">
		select *
		from attractions
		where area_code=#{areaCode}
		and si_gun_gu_code=#{siGunGuCode}
		and content_type_id=#{contentTypeId}
	</select>
</mapper>